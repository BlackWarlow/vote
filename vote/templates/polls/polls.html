{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
	.progress-title{
		font-size: 17px;
		font-weight: 700;
		color: white;
		text-transform: uppercase;
	}
	.progress{
		height: 19px;
		color: #577798;
		background: #303030;
		position: relative;
	}
	.progress .progress-bar{
		position: relative;
		background: #143660;
		position: relative;
		animation: animate-positive 1s;
	}
	.progress .progress-value{
		color: #7CA1CE;
	}
	@-webkit-keyframes animate-positive{
		0%{ width: 0; }
	}
	@keyframes animate-positive{
		0%{ width: 0; }
	}
</style>
<script>
	function declOfNum(number)  
	{
		titles = [' голос',' голоса', ' голосов'];
		cases = [2, 0, 1, 1, 1, 2];  
		return titles[ (number%100>4 && number%100<20)? 2 : cases[(number%10<5)?number%10:5] ];  
	}
	function std(el){
		var count = parseInt(el.innerHTML);
		el.innerHTML = count + declOfNum(count);
	}
</script>

<body>
	<h1>{{main_header}}</h1>
	<hr>
	
	{% for poll in polls%}
		<div class="post cl_container">
			<h2  href = "/">{{ poll.1.name }}</h2>

				{% for variant in poll.0 %}
					<big class = "progress-title">{{ variant.variant_name }}</big>
					<br>
					<div class = "progress">
						<div class="progress-bar" style="width:{{ variant.votes }}%;" id = "pr-b">
							<div class="progress-value"> <nobr name="counter"> {{ variant.votes }}</nobr></div>
						</div>
					</div>
					<br>
				{% endfor %}

		</div>
	{% endfor %}
	
	<script>
		var arr = document.getElementsByName("counter");
		for(var i = 0; i < arr.length; i++){
			std(arr[i]);
		}
	</script>
</body>
{% endblock %}










